<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hangman</title>
    <link rel="stylesheet" href="./hangman.css" />
    <script src="../resources/words.js"></script>
    <script src="./hangman.js"></script>
    <script>
        function settingsError(msg) {
            alert(msg);
            return false;
        }
        function saveSettings() {
            var ng = document.all.numGuesses.value;

            if (!ng || 0 > ng || 9 < ng) {
                return settingsError("Missed Guesses Allowed must be between 1 and 9");
            }
            lenChks = document.querySelectorAll('#wordLengthsUL li input');
            lens = settings.wordLensSelected.slice(0);
            lenChecked = false;
            for (var i = 0; i < lenChks.length; i++) {
                lenChecked |= (lens[i] = lenChks[i].checked);
            }
            if (!lenChecked) return settingsError("Please select at least one word length.")

            settings.numGuesses = ng;
            settings.wordLensSelected = lens;
            return true;
        }
        function loadSettings() {
            document.all.numGuesses.value = settings.numGuesses;
            ul = document.all.wordLengthsUL;
            for (var i = ul.children.length; i > 0 ; i--) {
                ul.children[i - 1].remove();
            }
            for (var i = 0; i < settings.wordLengths.length; i++) {
                val = settings.wordLengths[i];
                selected = settings.wordLensSelected[i];
                li = document.createElement('li');
                chk = document.createElement('input');
                chk.type = 'checkbox';
                chk.name = 'wordlen';
                chk.value = val;
                chk.checked = selected;
                li.appendChild(chk);
                sp = document.createElement('span');
                sp.innerText = val;
                li.appendChild(sp);
                ul.appendChild(li);
            }
        }
        function openSettings() {
            loadSettings();
            document.all.modal.style.display = 'block';
            document.all.settings.style.display = 'block';
        }
        function closeSettings(save) {
            if (save) {if (!saveSettings()) return false;}
            document.all.modal.style.display = 'none';
            document.all.settings.style.display = 'none';
        }
    </script>
</head>
<body>
    <div id="modal" class="modalBackground" onclick="closeSettings()">
    </div>
    <div id="settings" class="modal">
        <div class="modalTitle">Settings</div>
            <div class="modalSection">
                <label>Missed Guesses Allowed:&nbsp;</label>
                <input id="numGuesses" type="number" minlength="1" maxlength="1" min="1" max="9" />
            </div>
            <div class="modalSection">
                <label>Word Lengths Allowed:</label>
                <div class="listbox">
                    <ul id="wordLengthsUL">
                        <!-- <li><input type="checkbox" name="wordlen" value="1" />1</li> -->
                    </ul>
                </div>
            </div>
            <div class="modalSection modalBtns">
                <button onclick="closeSettings(true)">Save</button>
                <button onclick="closeSettings()">Cancel</button>
            </div>
        </div>
    <div id="topDiv">
        <span class="text">&nbsp;&nbsp;<a href="javascript:openSettings()" title="Settings">...</a>&nbsp;&nbsp;&nbsp;&nbsp;</span>
        <button class="btn" id="startGame" onclick="hangman()">Start&nbsp;New&nbsp;Game</button>
        <span class="text">&nbsp; Guesses Remaining: &nbsp;</span><span class="text" id="guessesRemaining">0</span>
    </div>
    <div id="wordDiv">
        <table><tr>
            <td>
                <label id="labelWord" class="text">The&nbsp;Word:</label>
            </td>
            <td>
                <div id="wordDisplay">
                    <div class="text letter word">A</div>
                    <div class="text letter word">B</div>
                    <div class="text letter word">C</div>
                    <div class="text letter word">D</div>
                    <div class="text letter word">E</div>
                    <div class="text letter word">F</div>
                    <div class="text letter word">G</div>
                    <div class="text letter word">H</div>
                    <div class="text letter word">I</div>
                    <div class="text letter word">J</div>
                    <div class="text letter word">K</div>
                    <div class="text letter word">L</div>
                    <div class="text letter word">M</div>
                    <div class="text letter word">N</div>
                </div>
            </td>
        </tr></table>
        <div id="qwerty">
            <div id="msgDiv" class="msg">
                <label id="msg"></label>
            </div>
            <div id="qwerty1">
                <button class="btnLetter" onclick="onUI(this)">Q</button>
                <button class="btnLetter" onclick="onUI(this)">W</button>
                <button class="btnLetter" onclick="onUI(this)">E</button>
                <button class="btnLetter" onclick="onUI(this)">R</button>
                <button class="btnLetter" onclick="onUI(this)">T</button>
                <button class="btnLetter" onclick="onUI(this)">Y</button>
                <button class="btnLetter" onclick="onUI(this)">U</button>
                <button class="btnLetter" onclick="onUI(this)">I</button>
                <button class="btnLetter" onclick="onUI(this)">O</button>
                <button class="btnLetter" onclick="onUI(this)">P</button>
            </div>
            <div id="qwerty2">
                    <button class="btnLetter" onclick="onUI(this)">A</button>
                    <button class="btnLetter" onclick="onUI(this)">S</button>
                    <button class="btnLetter" onclick="onUI(this)">D</button>
                    <button class="btnLetter" onclick="onUI(this)">F</button>
                    <button class="btnLetter" onclick="onUI(this)">G</button>
                    <button class="btnLetter" onclick="onUI(this)">H</button>
                    <button class="btnLetter" onclick="onUI(this)">J</button>
                    <button class="btnLetter" onclick="onUI(this)">K</button>
                    <button class="btnLetter" onclick="onUI(this)">L</button>
            </div>
            <div id="qwerty3">
                    <button class="btnLetter" onclick="onUI(this)">Z</button>
                    <button class="btnLetter" onclick="onUI(this)">X</button>
                    <button class="btnLetter" onclick="onUI(this)">C</button>
                    <button class="btnLetter" onclick="onUI(this)">V</button>
                    <button class="btnLetter" onclick="onUI(this)">B</button>
                    <button class="btnLetter" onclick="onUI(this)">N</button>
                    <button class="btnLetter" onclick="onUI(this)">M</button>
            </div>
        </div>
    </div>
</body>
</html>